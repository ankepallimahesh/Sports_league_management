{% extends 'base.html' %}
{% block content %}

<style>
  /* Use global tokens from base for consistent branding */
  .tournaments-wrap{max-width:1100px;margin:20px auto;padding:12px}
  .head{display:flex;justify-content:space-between;align-items:center}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px;margin-top:14px}
  .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:var(--shadow-sm);display:flex;flex-direction:column;justify-content:space-between}
  .card h3{margin:0;font-size:18px}
  .muted{color:var(--muted)}
  .meta{font-size:13px;color:var(--muted);margin-top:8px}
  .card-foot{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
  .btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;padding:8px 12px;border-radius:10px;border:none;text-decoration:none}
  .btn.ghost{background:transparent;color:var(--muted);border:1px solid rgba(15,23,42,0.06)}
</style>

<div class="tournaments-wrap">
  <div class="head">
    <div>
      <h2 style="margin:0">Tournaments</h2>
      <div class="muted">Create and view tournament brackets</div>
    </div>
    <div>
      {% if request.user.is_authenticated %}
        <a class="btn" href="{% url 'tournaments:create_tournament' %}">Create Tournament</a>
      {% else %}
  <a class="btn ghost" href="{% url 'login' %}">Sign in to create</a>
      {% endif %}
    </div>
  </div>

  <div class="grid">
    {% for t in tournaments %}
      <article class="card" role="article" aria-labelledby="tourn-{{ t.pk }}-title">
        <div>
          <h3 id="tourn-{{ t.pk }}-title"><a href="{% url 'tournaments:bracket_view' t.pk %}">{{ t.name }}</a></h3>
          <div class="meta">{{ t.description|default:"No description" }}</div>
        </div>
        <div class="card-foot">
          <div class="muted">Teams: {{ t.teams.count }}</div>
          <a class="btn ghost" href="{% url 'tournaments:bracket_view' t.pk %}">View</a>
        </div>
      </article>
    {% empty %}
  <div class="card">No tournaments yet. {% if request.user.is_authenticated %}<a class="btn" href="{% url 'tournaments:create_tournament' %}">Create one</a>{% else %}<a class="btn ghost" href="{% url 'login' %}">Sign in</a>{% endif %}</div>
    {% endfor %}
  </div>
</div>

{% endblock %}
