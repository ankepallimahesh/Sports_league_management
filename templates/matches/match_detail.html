{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block content %}
<style>
  .match-hero{display:flex;gap:18px;align-items:center;background:linear-gradient(180deg,#fff,#f7fbff);padding:18px;border-radius:14px;box-shadow:0 12px 36px rgba(10,20,40,0.06)}
  .team-badge{width:120px;height:120px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:800;background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#fff;font-size:36px}
  .match-meta{color:var(--muted);margin-top:6px}
  .score-badge{font-weight:900;background:linear-gradient(180deg,#fff,#eef2ff);padding:10px 14px;border-radius:12px}
  .section{background:#fff;padding:14px;border-radius:12px;box-shadow:0 10px 28px rgba(12,24,50,0.06);margin-top:14px}
  .goals-list{list-style:none;padding:0;margin:0}
  .goals-list li{padding:8px 0;border-bottom:1px solid rgba(15,23,42,0.04)}
  .muted{color:var(--muted)}
  @media (max-width:720px){ .match-hero{flex-direction:column;align-items:flex-start} .team-badge{width:96px;height:96px} }
</style>

<div class="container">
  <div class="match-hero" role="region" aria-labelledby="match-title">
    <div class="team-badge">{{ match.home.short_name|default:match.home.name|slice:":1" }}</div>
    <div style="flex:1">
      <h2 id="match-title" style="margin:0">{{ match.home.name }} vs {{ match.away.name }}</h2>
      <div class="match-meta">Date: {{ match.date|default:"TBD" }}</div>
      <div style="margin-top:10px" class="muted">Venue: {{ match.venue|default:"Not specified" }}</div>
    </div>
    <div style="display:flex;flex-direction:column;align-items:flex-end;gap:8px">
      <div class="score-badge">{% if match.played %}{{ match.home_score }} — {{ match.away_score }}{% else %}Not played{% endif %}</div>
      <a class="btn ghost" href="{% url 'matches:match_list' %}">Back to matches</a>
    </div>
  </div>

  <section class="section" aria-labelledby="score-heading">
    <h3 id="score-heading">Score</h3>
    <form method="post">{% csrf_token %}
      {{ form|crispy }}
      <div style="margin-top:12px">
        <button name="save_score" class="btn">Save score</button>
      </div>
    </form>
  </section>

  <section class="section" aria-labelledby="goals-heading">
    <h3 id="goals-heading">Goals</h3>
    <ul class="goals-list">
      {% for g in goals %}
        <li>{{ g.minute }}' — <a href="{% url 'accounts:player_profile' g.player.pk %}">{{ g.player.full_name }}</a></li>
      {% empty %}
        <li class="muted">No goals recorded yet.</li>
      {% endfor %}
    </ul>

    <div style="margin-top:12px">
      <h4 style="margin:0 0 8px 0">Add Goal</h4>
      <form method="post">{% csrf_token %}
        {{ goal_form|crispy }}
        <div style="margin-top:8px">
          <button name="add_goal" class="btn">Add Goal</button>
        </div>
      </form>
    </div>
  </section>

  {% if match.played %}
    <div class="section" style="margin-top:14px">
      <p class="muted">Result: <strong>{{ match.home_score }} — {{ match.away_score }}</strong></p>
      <p class="muted">Winner: <strong>{{ match.winner }}</strong></p>
    </div>
  {% endif %}
</div>

{% endblock %}
