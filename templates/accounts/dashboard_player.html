{% extends 'base.html' %}
{% block content %}
<style>
  .player-grid{display:grid;grid-template-columns:220px 1fr;gap:18px}
  @media(max-width:820px){.player-grid{grid-template-columns:1fr}}
  .meta{color:var(--muted)}
</style>

<div class="container">
  <h2 style="margin-top:0">Player Dashboard</h2>
  {% if player %}
    <div class="player-grid">
      <aside class="card" style="display:flex;flex-direction:column;align-items:center;gap:12px">
        {% if player.photo %}
          <img src="{{ player.photo.url }}" alt="avatar" style="width:120px;height:120px;border-radius:12px;object-fit:cover">
        {% else %}
          <div style="width:120px;height:120px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:36px">{{ player.full_name|slice:":1" }}</div>
        {% endif %}
        <div style="text-align:center">
          <div style="font-size:18px;font-weight:700">{{ player.full_name }}</div>
          <div class="meta">Username: {{ player.user.username }}</div>
        </div>
        <a class="btn" href="{% url 'accounts:edit_player' %}">Edit Profile</a>
      </aside>

      <div>
        <div class="card">
          <h4 style="margin-top:0">Summary</h4>
          <div style="display:flex;gap:18px;flex-wrap:wrap">
            <div class="stat"><h3 style="margin:0">{{ goals }}</h3><small>Goals</small></div>
            <div class="stat"><h3 style="margin:0">{{ matches_played }}</h3><small>Matches</small></div>
            <div class="stat"><h3 style="margin:0">{{ wins }}</h3><small>Wins</small></div>
            <div class="stat"><h3 style="margin:0">{{ draws }}</h3><small>Draws</small></div>
            <div class="stat"><h3 style="margin:0">{{ losses }}</h3><small>Losses</small></div>
          </div>
        </div>

        <div class="card">
          <h4 style="margin-top:0">Your Teams</h4>
          <ul class="list">
            {% for t in player.teams.all %}
              <li><a href="{% url 'accounts:team_detail' t.pk %}">{{ t.name }}</a></li>
            {% empty %}
              <li class="small">Not a member of any team yet.</li>
            {% endfor %}
          </ul>
          <div style="margin-top:8px;display:flex;gap:8px">
            <a class="btn" href="{% url 'accounts:team_register' %}">Create/Join Team</a>
            <a class="btn ghost" href="{% url 'accounts:edit_player' %}">Edit Profile</a>
          </div>
        </div>
      </div>
    </div>
  {% else %}
    <div class="card">
      <p class="muted">You don't have a player profile yet.</p>
      <p><a class="btn" href="{% url 'accounts:signup_player' %}">Create Player Profile</a></p>
    </div>
  {% endif %}
</div>
{% endblock %}
